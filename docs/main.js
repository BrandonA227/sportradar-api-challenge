(()=>{var e={555:e=>{e.exports={getRequest:async function(e){try{const t=await fetch(e,{mode:"cors"});if(t.status>=200&&t.status<=299)return t.json();throw t}catch(e){return e.statusText}},convertJsonToCsv:function(e){const t=Object.keys(e),a=[t.join(","),t.map((t=>JSON.stringify(e[t]))).join(",")].join("\r\n");return console.log(a),a}}}},t={};function a(s){var r=t[s];if(void 0!==r)return r.exports;var n=t[s]={exports:{}};return e[s](n,n.exports,a),n.exports}(()=>{"use strict";var e=a(555);class t{static#e="https://statsapi.web.nhl.com/api/v1/";static getPlayerData(a){const s=`people/${a}`,r=t.#e+s;return(0,e.getRequest)(r)}static getPlayerSeasonData(a,s){const r=`people/${a}/stats?stats=statsSingleSeason&season=${s}`,n=t.#e+r;return(0,e.getRequest)(n)}static getTeamSeasonStats(a,s){const r=`teams/${a}?expand=team.stats&season=${s}`,n=t.#e+r;return(0,e.getRequest)(n)}static getTeamGamesPlayed(a,s){const r=`schedule?season=${s}&teamId=${a}&gameType=R`,n=t.#e+r;return(0,e.getRequest)(n)}}(()=>{const a=document.querySelectorAll(".type-selector > li"),s=document.querySelector(".id-container > label"),r=document.getElementById("id-input"),n=document.getElementById("season-year"),o=document.querySelector(".download-csv-btn"),i=document.querySelectorAll("input"),l=document.querySelector(".error-message");let m="Player";const c=e=>{l.textContent=e},u=e=>{a.forEach((e=>e.classList.remove("active"))),e.target.classList.add("active"),s.textContent=e.target.textContent+" ID",m=e.target.textContent},d=e=>{e.target.value=e.target.value.slice(0,e.target.maxLength)};o.addEventListener("click",(async()=>{if((()=>{let e=!0;return i.forEach((t=>{t.validity.valueMissing&&(e=!1)})),e})()){let a=await(async(e,a)=>{const s=m.toLowerCase();let r;return"player"===s?r=await Promise.all([t.getPlayerData(e),t.getPlayerSeasonData(e,a)]):"team"===s&&(r=await Promise.all([t.getTeamSeasonStats(e,a),t.getTeamGamesPlayed(e,a)])),r})(r.value,n.value);if((e=>{c("");let t=!1;if(!e)return c("There was an error. Try again later."),!1;let a=!0;return e.forEach((e=>{"string"==typeof e&&(a=!1,"Internal Server Error"!==e&&(t=!0,c(e)))})),t||a||c("Internal Server Error"),a})(a)){const t=(e=>{let t={};const a=m.toLowerCase();if("player"===a){const a=e[0]?.people[0],s=e[1]?.stats[0]?.splits[0]?.stat;t.id=a?.id,t.fullName=a?.fullName,t.currentTeam=a?.currentTeam?.name,t.currentAge=a?.currentAge,t.primaryNumber=Number(a?.primaryNumber),t.playerPosition=a?.primaryPosition.name,t.isRookie=a?.rookie,t.assists=s?.assists,t.goals=s?.goals,t.games=s?.games,t.hits=s?.hits,t.points=s?.points}else if("team"===a){const a=e[0]?.teams[0]?.teamStats[0]?.splits[0],s=e[1]?.dates[0];t.id=a?.team?.id,t.teamName=a?.team.name,t.teamVenueName=e[0]?.teams[0]?.venue?.name,t.gamesPlayed=a?.stat?.gamesPlayed,t.wins=a?.stat?.wins,t.losses=a?.stat?.losses,t.points=a?.stat?.pts,t.goalsPerGame=a?.stat?.goalsPerGame,t.firstGameDate=s?.date,t.firstGameOpponetName=s?.games[0]?.teams?.away?.team?.id!==m?s?.games[0]?.teams?.away?.team?.name:s?.games[0]?.teams?.home?.team?.name}return t})(a);((e,t)=>{let a=document.createElement("a");a.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),a.setAttribute("download","nhl_data.csv"),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a)})(0,(0,e.convertJsonToCsv)(t))}}else c("Both fields are required.")})),a.forEach((e=>{e.addEventListener("click",u)})),i.forEach((e=>{e.addEventListener("input",d)}))})()})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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R0FDMUJBLEVBQVErRSxRQUNSaEcsU0FBUzhGLEtBQUtHLFlBQVloRixFQUFRLEVBeUQ5QmlGLENBQVMsR0FETyxJQUFBN0gsa0JBQWlCd0UsR0FFbkMsQ0FDRixNQUNFbEMsRUFBYSw0QkFDZixJQWdCQVosRUFBU2lCLFNBQVNDLElBQ2hCQSxFQUFRUyxpQkFBaUIsUUFBU1osRUFBWSxJQUVoRE4sRUFBVVEsU0FBU0MsSUFDakJBLEVBQVFTLGlCQUFpQixRQUFTSixFQUFVLEdBR2pELEVBckpELEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zcG9ydHJhZGFyLWFwaS1jaGFsbGVuZ2UvLi9zcmMvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vc3BvcnRyYWRhci1hcGktY2hhbGxlbmdlL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3Nwb3J0cmFkYXItYXBpLWNoYWxsZW5nZS8uL3NyYy9uaGwuanMiLCJ3ZWJwYWNrOi8vc3BvcnRyYWRhci1hcGktY2hhbGxlbmdlLy4vc3JjL2Rpc3BsYXkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiYXN5bmMgZnVuY3Rpb24gZ2V0UmVxdWVzdCh1cmwpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCh1cmwsIHsgbW9kZTogXCJjb3JzXCIgfSk7XG4gICAgaWYgKHJlcy5zdGF0dXMgPj0gMjAwICYmIHJlcy5zdGF0dXMgPD0gMjk5KSB7XG4gICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgcmVzO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXR1cm4gZXJyb3Iuc3RhdHVzVGV4dDtcbiAgfVxufVxuXG5mdW5jdGlvbiBjb252ZXJ0SnNvblRvQ3N2KG9iaikge1xuICBjb25zdCBoZWFkZXIgPSBPYmplY3Qua2V5cyhvYmopO1xuICBjb25zdCBjc3YgPSBbXG4gICAgaGVhZGVyLmpvaW4oXCIsXCIpLFxuICAgIGhlYWRlci5tYXAoKGZpZWxkTmFtZSkgPT4gSlNPTi5zdHJpbmdpZnkob2JqW2ZpZWxkTmFtZV0pKS5qb2luKFwiLFwiKSxcbiAgXS5qb2luKFwiXFxyXFxuXCIpO1xuICBjb25zb2xlLmxvZyhjc3YpO1xuICByZXR1cm4gY3N2O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgZ2V0UmVxdWVzdCxcbiAgY29udmVydEpzb25Ub0Nzdixcbn07XG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiaW1wb3J0IHsgZ2V0UmVxdWVzdCB9IGZyb20gXCIuL3V0aWxzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE5ITCB7XG4gIHN0YXRpYyAjTkhMX0FQSV9VUkwgPSBcImh0dHBzOi8vc3RhdHNhcGkud2ViLm5obC5jb20vYXBpL3YxL1wiO1xuXG4gIHN0YXRpYyBnZXRQbGF5ZXJEYXRhKGlkKSB7XG4gICAgY29uc3QgUExBWUVSX1VSTCA9IGBwZW9wbGUvJHtpZH1gO1xuICAgIGNvbnN0IGZ1bGxVcmwgPSBOSEwuI05ITF9BUElfVVJMICsgUExBWUVSX1VSTDtcbiAgICByZXR1cm4gZ2V0UmVxdWVzdChmdWxsVXJsKTtcbiAgfVxuXG4gIHN0YXRpYyBnZXRQbGF5ZXJTZWFzb25EYXRhKGlkLCB5ZWFyKSB7XG4gICAgY29uc3QgUExBWUVSX1VSTCA9IGBwZW9wbGUvJHtpZH0vc3RhdHM/c3RhdHM9c3RhdHNTaW5nbGVTZWFzb24mc2Vhc29uPSR7eWVhcn1gO1xuICAgIGNvbnN0IGZ1bGxVcmwgPSBOSEwuI05ITF9BUElfVVJMICsgUExBWUVSX1VSTDtcbiAgICByZXR1cm4gZ2V0UmVxdWVzdChmdWxsVXJsKTtcbiAgfVxuXG4gIHN0YXRpYyBnZXRUZWFtU2Vhc29uU3RhdHMoaWQsIHllYXIpIHtcbiAgICBjb25zdCBURUFNX1VSTCA9IGB0ZWFtcy8ke2lkfT9leHBhbmQ9dGVhbS5zdGF0cyZzZWFzb249JHt5ZWFyfWA7XG4gICAgY29uc3QgZnVsbFVybCA9IE5ITC4jTkhMX0FQSV9VUkwgKyBURUFNX1VSTDtcbiAgICByZXR1cm4gZ2V0UmVxdWVzdChmdWxsVXJsKTtcbiAgfVxuXG4gIHN0YXRpYyBnZXRUZWFtR2FtZXNQbGF5ZWQoaWQsIHllYXIpIHtcbiAgICBjb25zdCBURUFNX1VSTCA9IGBzY2hlZHVsZT9zZWFzb249JHt5ZWFyfSZ0ZWFtSWQ9JHtpZH0mZ2FtZVR5cGU9UmA7XG4gICAgY29uc3QgZnVsbFVybCA9IE5ITC4jTkhMX0FQSV9VUkwgKyBURUFNX1VSTDtcbiAgICByZXR1cm4gZ2V0UmVxdWVzdChmdWxsVXJsKTtcbiAgfVxufVxuIiwiaW1wb3J0IE5ITCBmcm9tIFwiLi9uaGxcIjtcbmltcG9ydCB7IGNvbnZlcnRKc29uVG9Dc3YgfSBmcm9tIFwiLi91dGlsc1wiO1xuXG4oKCkgPT4ge1xuICBjb25zdCB0eXBlVGFncyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIudHlwZS1zZWxlY3RvciA+IGxpXCIpO1xuICBjb25zdCBpZExhYmVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5pZC1jb250YWluZXIgPiBsYWJlbFwiKTtcbiAgY29uc3QgaWRJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaWQtaW5wdXRcIik7XG4gIGNvbnN0IHNlYXNvblllYXJJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2Vhc29uLXllYXJcIik7XG4gIGNvbnN0IHN1Ym1pdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZG93bmxvYWQtY3N2LWJ0blwiKTtcbiAgY29uc3QgZm9ybUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcImlucHV0XCIpO1xuICBjb25zdCBlcnJvck1lc3NhZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVycm9yLW1lc3NhZ2VcIik7XG5cbiAgbGV0IGlkVHlwZSA9IFwiUGxheWVyXCI7XG5cbiAgY29uc3QgdmVyaWZ5UmVxdWVzdERhdGEgPSAoZGF0YSkgPT4ge1xuICAgIGRpc3BsYXlFcnJvcihcIlwiKTtcbiAgICBsZXQgZXJyb3JEaXNwbGF5ZWQgPSBmYWxzZTtcbiAgICBpZiAoIWRhdGEpIHtcbiAgICAgIGRpc3BsYXlFcnJvcihcIlRoZXJlIHdhcyBhbiBlcnJvci4gVHJ5IGFnYWluIGxhdGVyLlwiKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgbGV0IGlzVmFsaWQgPSB0cnVlO1xuICAgIGRhdGEuZm9yRWFjaCgodmFsKSA9PiB7XG4gICAgICBpZiAodHlwZW9mIHZhbCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICBpc1ZhbGlkID0gZmFsc2U7XG4gICAgICAgIGlmICh2YWwgIT09IFwiSW50ZXJuYWwgU2VydmVyIEVycm9yXCIpIHtcbiAgICAgICAgICBlcnJvckRpc3BsYXllZCA9IHRydWU7XG4gICAgICAgICAgZGlzcGxheUVycm9yKHZhbCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgICBpZiAoIWVycm9yRGlzcGxheWVkICYmICFpc1ZhbGlkKSB7XG4gICAgICBkaXNwbGF5RXJyb3IoXCJJbnRlcm5hbCBTZXJ2ZXIgRXJyb3JcIik7XG4gICAgfVxuICAgIHJldHVybiBpc1ZhbGlkO1xuICB9O1xuXG4gIGNvbnN0IGdldE5obERhdGEgPSBhc3luYyAoaWQsIHllYXIpID0+IHtcbiAgICBjb25zdCB0eXBlT2ZEYXRhID0gaWRUeXBlLnRvTG93ZXJDYXNlKCk7XG4gICAgbGV0IGRhdGE7XG4gICAgaWYgKHR5cGVPZkRhdGEgPT09IFwicGxheWVyXCIpIHtcbiAgICAgIGRhdGEgPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgIE5ITC5nZXRQbGF5ZXJEYXRhKGlkKSxcbiAgICAgICAgTkhMLmdldFBsYXllclNlYXNvbkRhdGEoaWQsIHllYXIpLFxuICAgICAgXSk7XG4gICAgfSBlbHNlIGlmICh0eXBlT2ZEYXRhID09PSBcInRlYW1cIikge1xuICAgICAgZGF0YSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgICAgTkhMLmdldFRlYW1TZWFzb25TdGF0cyhpZCwgeWVhciksXG4gICAgICAgIE5ITC5nZXRUZWFtR2FtZXNQbGF5ZWQoaWQsIHllYXIpLFxuICAgICAgXSk7XG4gICAgfVxuICAgIHJldHVybiBkYXRhO1xuICB9O1xuXG4gIGNvbnN0IGRpc3BsYXlFcnJvciA9IChtZXNzYWdlKSA9PiB7XG4gICAgZXJyb3JNZXNzYWdlLnRleHRDb250ZW50ID0gbWVzc2FnZTtcbiAgfTtcblxuICBjb25zdCBkb3dubG9hZCA9IChmaWxlbmFtZSwgdGV4dCkgPT4ge1xuICAgIGxldCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7XG4gICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoXG4gICAgICBcImhyZWZcIixcbiAgICAgIFwiZGF0YTp0ZXh0L3BsYWluO2NoYXJzZXQ9dXRmLTgsXCIgKyBlbmNvZGVVUklDb21wb25lbnQodGV4dClcbiAgICApO1xuICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZG93bmxvYWRcIiwgZmlsZW5hbWUpO1xuICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZWxlbWVudCk7XG4gICAgZWxlbWVudC5jbGljaygpO1xuICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoZWxlbWVudCk7XG4gIH07XG5cbiAgY29uc3QgaXNWYWxpZElucHV0ID0gKCkgPT4ge1xuICAgIGxldCBpc1ZhbGlkID0gdHJ1ZTtcbiAgICBmb3JtSW5wdXQuZm9yRWFjaCgoZWxlKSA9PiB7XG4gICAgICBpZiAoZWxlLnZhbGlkaXR5LnZhbHVlTWlzc2luZykge1xuICAgICAgICBpc1ZhbGlkID0gZmFsc2U7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIGlzVmFsaWQ7XG4gIH07XG5cbiAgY29uc3QgZmlsdGVyTmhsRGF0YSA9IChkYXRhKSA9PiB7XG4gICAgbGV0IGZpbHRlcmVkRGF0YSA9IHt9O1xuICAgIGNvbnN0IHR5cGVPZkRhdGEgPSBpZFR5cGUudG9Mb3dlckNhc2UoKTtcbiAgICBpZiAodHlwZU9mRGF0YSA9PT0gXCJwbGF5ZXJcIikge1xuICAgICAgY29uc3QgcGxheWVyRGF0YSA9IGRhdGFbMF0/LnBlb3BsZVswXTtcbiAgICAgIGNvbnN0IHBsYXllclN0YXRzRGF0YSA9IGRhdGFbMV0/LnN0YXRzWzBdPy5zcGxpdHNbMF0/LnN0YXQ7XG4gICAgICBmaWx0ZXJlZERhdGEuaWQgPSBwbGF5ZXJEYXRhPy5pZDtcbiAgICAgIGZpbHRlcmVkRGF0YS5mdWxsTmFtZSA9IHBsYXllckRhdGE/LmZ1bGxOYW1lO1xuICAgICAgZmlsdGVyZWREYXRhLmN1cnJlbnRUZWFtID0gcGxheWVyRGF0YT8uY3VycmVudFRlYW0/Lm5hbWU7XG4gICAgICBmaWx0ZXJlZERhdGEuY3VycmVudEFnZSA9IHBsYXllckRhdGE/LmN1cnJlbnRBZ2U7XG4gICAgICBmaWx0ZXJlZERhdGEucHJpbWFyeU51bWJlciA9IE51bWJlcihwbGF5ZXJEYXRhPy5wcmltYXJ5TnVtYmVyKTtcbiAgICAgIGZpbHRlcmVkRGF0YS5wbGF5ZXJQb3NpdGlvbiA9IHBsYXllckRhdGE/LnByaW1hcnlQb3NpdGlvbi5uYW1lO1xuICAgICAgZmlsdGVyZWREYXRhLmlzUm9va2llID0gcGxheWVyRGF0YT8ucm9va2llO1xuICAgICAgZmlsdGVyZWREYXRhLmFzc2lzdHMgPSBwbGF5ZXJTdGF0c0RhdGE/LmFzc2lzdHM7XG4gICAgICBmaWx0ZXJlZERhdGEuZ29hbHMgPSBwbGF5ZXJTdGF0c0RhdGE/LmdvYWxzO1xuICAgICAgZmlsdGVyZWREYXRhLmdhbWVzID0gcGxheWVyU3RhdHNEYXRhPy5nYW1lcztcbiAgICAgIGZpbHRlcmVkRGF0YS5oaXRzID0gcGxheWVyU3RhdHNEYXRhPy5oaXRzO1xuICAgICAgZmlsdGVyZWREYXRhLnBvaW50cyA9IHBsYXllclN0YXRzRGF0YT8ucG9pbnRzO1xuICAgIH0gZWxzZSBpZiAodHlwZU9mRGF0YSA9PT0gXCJ0ZWFtXCIpIHtcbiAgICAgIGNvbnN0IHRlYW1EYXRhID0gZGF0YVswXT8udGVhbXNbMF0/LnRlYW1TdGF0c1swXT8uc3BsaXRzWzBdO1xuICAgICAgY29uc3QgZmlyc3RHYW1lRGF0YSA9IGRhdGFbMV0/LmRhdGVzWzBdO1xuICAgICAgZmlsdGVyZWREYXRhLmlkID0gdGVhbURhdGE/LnRlYW0/LmlkO1xuICAgICAgZmlsdGVyZWREYXRhLnRlYW1OYW1lID0gdGVhbURhdGE/LnRlYW0ubmFtZTtcbiAgICAgIGZpbHRlcmVkRGF0YS50ZWFtVmVudWVOYW1lID0gZGF0YVswXT8udGVhbXNbMF0/LnZlbnVlPy5uYW1lO1xuICAgICAgZmlsdGVyZWREYXRhLmdhbWVzUGxheWVkID0gdGVhbURhdGE/LnN0YXQ/LmdhbWVzUGxheWVkO1xuICAgICAgZmlsdGVyZWREYXRhLndpbnMgPSB0ZWFtRGF0YT8uc3RhdD8ud2lucztcbiAgICAgIGZpbHRlcmVkRGF0YS5sb3NzZXMgPSB0ZWFtRGF0YT8uc3RhdD8ubG9zc2VzO1xuICAgICAgZmlsdGVyZWREYXRhLnBvaW50cyA9IHRlYW1EYXRhPy5zdGF0Py5wdHM7XG4gICAgICBmaWx0ZXJlZERhdGEuZ29hbHNQZXJHYW1lID0gdGVhbURhdGE/LnN0YXQ/LmdvYWxzUGVyR2FtZTtcbiAgICAgIGZpbHRlcmVkRGF0YS5maXJzdEdhbWVEYXRlID0gZmlyc3RHYW1lRGF0YT8uZGF0ZTtcbiAgICAgIGZpbHRlcmVkRGF0YS5maXJzdEdhbWVPcHBvbmV0TmFtZSA9XG4gICAgICAgIGZpcnN0R2FtZURhdGE/LmdhbWVzWzBdPy50ZWFtcz8uYXdheT8udGVhbT8uaWQgIT09IGlkVHlwZVxuICAgICAgICAgID8gZmlyc3RHYW1lRGF0YT8uZ2FtZXNbMF0/LnRlYW1zPy5hd2F5Py50ZWFtPy5uYW1lXG4gICAgICAgICAgOiBmaXJzdEdhbWVEYXRhPy5nYW1lc1swXT8udGVhbXM/LmhvbWU/LnRlYW0/Lm5hbWU7XG4gICAgfVxuICAgIHJldHVybiBmaWx0ZXJlZERhdGE7XG4gIH07XG5cbiAgY29uc3QgZG93bmxvYWRDU1YgPSBhc3luYyAoKSA9PiB7XG4gICAgaWYgKGlzVmFsaWRJbnB1dCgpKSB7XG4gICAgICBsZXQgZGF0YSA9IGF3YWl0IGdldE5obERhdGEoaWRJbnB1dC52YWx1ZSwgc2Vhc29uWWVhcklucHV0LnZhbHVlKTtcbiAgICAgIGlmICh2ZXJpZnlSZXF1ZXN0RGF0YShkYXRhKSkge1xuICAgICAgICBjb25zdCBmaWx0ZXJlZERhdGEgPSBmaWx0ZXJOaGxEYXRhKGRhdGEpO1xuICAgICAgICBjb25zdCBjc3ZEYXRhID0gY29udmVydEpzb25Ub0NzdihmaWx0ZXJlZERhdGEpO1xuICAgICAgICBkb3dubG9hZChcIm5obF9kYXRhLmNzdlwiLCBjc3ZEYXRhKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZGlzcGxheUVycm9yKFwiQm90aCBmaWVsZHMgYXJlIHJlcXVpcmVkLlwiKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgY2hhbmdlSWRUYWcgPSAoZSkgPT4ge1xuICAgIHR5cGVUYWdzLmZvckVhY2goKGVsZW1lbnQpID0+IGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKSk7XG4gICAgZS50YXJnZXQuY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKTtcbiAgICBpZExhYmVsLnRleHRDb250ZW50ID0gZS50YXJnZXQudGV4dENvbnRlbnQgKyBcIiBJRFwiO1xuICAgIGlkVHlwZSA9IGUudGFyZ2V0LnRleHRDb250ZW50O1xuICB9O1xuXG4gIGNvbnN0IGxpbWl0Q2hhciA9IChlKSA9PiB7XG4gICAgZS50YXJnZXQudmFsdWUgPSBlLnRhcmdldC52YWx1ZS5zbGljZSgwLCBlLnRhcmdldC5tYXhMZW5ndGgpO1xuICB9O1xuXG4gIGNvbnN0IF9pbml0ID0gKCgpID0+IHtcbiAgICBzdWJtaXRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGRvd25sb2FkQ1NWKTtcbiAgICB0eXBlVGFncy5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjaGFuZ2VJZFRhZyk7XG4gICAgfSk7XG4gICAgZm9ybUlucHV0LmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIGxpbWl0Q2hhcik7XG4gICAgfSk7XG4gIH0pKCk7XG59KSgpO1xuIl0sIm5hbWVzIjpbIm1vZHVsZSIsImV4cG9ydHMiLCJnZXRSZXF1ZXN0IiwiYXN5bmMiLCJ1cmwiLCJyZXMiLCJmZXRjaCIsIm1vZGUiLCJzdGF0dXMiLCJqc29uIiwiZXJyb3IiLCJzdGF0dXNUZXh0IiwiY29udmVydEpzb25Ub0NzdiIsIm9iaiIsImhlYWRlciIsIk9iamVjdCIsImtleXMiLCJjc3YiLCJqb2luIiwibWFwIiwiZmllbGROYW1lIiwiSlNPTiIsInN0cmluZ2lmeSIsImNvbnNvbGUiLCJsb2ciLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJ1bmRlZmluZWQiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiTkhMIiwic3RhdGljIiwiaWQiLCJQTEFZRVJfVVJMIiwiZnVsbFVybCIsInllYXIiLCJURUFNX1VSTCIsInR5cGVUYWdzIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaWRMYWJlbCIsInF1ZXJ5U2VsZWN0b3IiLCJpZElucHV0IiwiZ2V0RWxlbWVudEJ5SWQiLCJzZWFzb25ZZWFySW5wdXQiLCJzdWJtaXRCdG4iLCJmb3JtSW5wdXQiLCJlcnJvck1lc3NhZ2UiLCJpZFR5cGUiLCJkaXNwbGF5RXJyb3IiLCJtZXNzYWdlIiwidGV4dENvbnRlbnQiLCJjaGFuZ2VJZFRhZyIsImUiLCJmb3JFYWNoIiwiZWxlbWVudCIsImNsYXNzTGlzdCIsInJlbW92ZSIsInRhcmdldCIsImFkZCIsImxpbWl0Q2hhciIsInZhbHVlIiwic2xpY2UiLCJtYXhMZW5ndGgiLCJhZGRFdmVudExpc3RlbmVyIiwiaXNWYWxpZCIsImVsZSIsInZhbGlkaXR5IiwidmFsdWVNaXNzaW5nIiwiaXNWYWxpZElucHV0IiwiZGF0YSIsInR5cGVPZkRhdGEiLCJ0b0xvd2VyQ2FzZSIsIlByb21pc2UiLCJhbGwiLCJnZXRQbGF5ZXJEYXRhIiwiZ2V0UGxheWVyU2Vhc29uRGF0YSIsImdldFRlYW1TZWFzb25TdGF0cyIsImdldFRlYW1HYW1lc1BsYXllZCIsImdldE5obERhdGEiLCJlcnJvckRpc3BsYXllZCIsInZhbCIsInZlcmlmeVJlcXVlc3REYXRhIiwiZmlsdGVyZWREYXRhIiwicGxheWVyRGF0YSIsInBlb3BsZSIsInBsYXllclN0YXRzRGF0YSIsInN0YXRzIiwic3BsaXRzIiwic3RhdCIsImZ1bGxOYW1lIiwiY3VycmVudFRlYW0iLCJuYW1lIiwiY3VycmVudEFnZSIsInByaW1hcnlOdW1iZXIiLCJOdW1iZXIiLCJwbGF5ZXJQb3NpdGlvbiIsInByaW1hcnlQb3NpdGlvbiIsImlzUm9va2llIiwicm9va2llIiwiYXNzaXN0cyIsImdvYWxzIiwiZ2FtZXMiLCJoaXRzIiwicG9pbnRzIiwidGVhbURhdGEiLCJ0ZWFtcyIsInRlYW1TdGF0cyIsImZpcnN0R2FtZURhdGEiLCJkYXRlcyIsInRlYW0iLCJ0ZWFtTmFtZSIsInRlYW1WZW51ZU5hbWUiLCJ2ZW51ZSIsImdhbWVzUGxheWVkIiwid2lucyIsImxvc3NlcyIsInB0cyIsImdvYWxzUGVyR2FtZSIsImZpcnN0R2FtZURhdGUiLCJkYXRlIiwiZmlyc3RHYW1lT3Bwb25ldE5hbWUiLCJhd2F5IiwiaG9tZSIsImZpbHRlck5obERhdGEiLCJmaWxlbmFtZSIsInRleHQiLCJjcmVhdGVFbGVtZW50Iiwic2V0QXR0cmlidXRlIiwiZW5jb2RlVVJJQ29tcG9uZW50Iiwic3R5bGUiLCJkaXNwbGF5IiwiYm9keSIsImFwcGVuZENoaWxkIiwiY2xpY2siLCJyZW1vdmVDaGlsZCIsImRvd25sb2FkIl0sInNvdXJjZVJvb3QiOiIifQ==